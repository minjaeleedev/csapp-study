# 1-9. Important Themes

## Overview

컴퓨터 시스템의 모든 측면을 관통하는 몇 가지 주요한 개념 살펴보기

## 1.9.1 Amdahl's Law

#### Concepts
시스템의 한 부분의 성능을 개선할 때, 전체 시스템에 미치는 영향은 해당 부분이 차지하는 비중과 개선 정도에 의존한다는 것

#### 개선되는 전체 실행시간
1. 기존의 전체 실행 시간 : $T_{old}$
2. 개선하려는 부분이 전체에서 차지하는 비율 : $\alpha$
3. 속도 향상 비율 : $k$ (k배 개선)
4. 컴포넌트 실행 시간 = $\alpha T_{old}$
5. 개선된 컴포넌트 실행 시간 = $\alpha T_{old} / k$
6. 개선된 전체 실행시간
    $$ T_{new} = (1-\alpha)T_{old} + \alpha T_{old} / k$$
    $$ = T_{old}[(1-\alpha) + \alpha /k]$$
#### 속도 향상 비율
   $$S:=T_{old}/T_{new}$$
   $$ S = {{1}\over{(1-\alpha) + \alpha / k}}$$

#### 예시
1. 전체 60%의 시간비중을 차지하는 컴포넌트의 성능을 3배 개선
2. 성능 향상 비율 = 1/[0.4+0.6/3]=1.67

#### Aside : Expressing relative performance
1. 성능 향상을 표현하는 가장 좋은 방법 : $T_{old}/T_{new}$ 비율
2. 실제 성능 향상이 이루어지면 해당 값은 1.0보다 큰 수가 됨
3. 접미사 'x'를 사용해서 표현 가능 : 2.2x = 2.2 times
4. 상대적 변화를 백분율로 표현하는 방법 : 변화가 작을 때는 잘 작동
   - 단점1. 정의가 모호하다. 둘 중에 무엇을 쓸 것인지?
     - $100*(T_{old}-T_{new})/T_{new}$
     - $100*(T_{\rm{old}}-T_{\rm {new}})/T_{\rm{old}}$
   - 단점2. 변화가 클 때는 백분율 표현이 덜 직관적임
     - '성능이 120% 향상됐다' 보다는 '성능이 2.2x 향상됐다'

#### Practive Problem 1.1

트럭 운전사가 아이다호 주 보이시에서 미네소타 주 미니애폴리스까지 감자를 운송하는 일을 맡았다.
총 거리는 2,500킬로미터이고, 제한 속도를 지키며 평균 시속 100킬로미터로 운전할 수 있다고 예상하며, 이 경우 전체 운행 시간은 25시간이 소요될 것이다

1. Montana 주에서 제한 속도를 폐지했다는 뉴스를 들었다. 해당 구간은 전체 경로 중 1,500km를 차지한다. 트럭은 150km/h로 운행할 수 있다. 속도 향상 비율은?
- $\alpha=1500/2500=0.6$, $k=150/100=1.5$
- $1/[(1-\alpha)+\alpha/k]=1/(0.4+0.4)=5/4=1.25$

2. 전체 여행에서 1.67배의 속도 향상을 얻으려면, Montana 구간에서 얼마의 속도로 주행해야 하는가?
- $\alpha=0.6, S=1.67=5/3$
- $(1-\alpha) + \alpha/k=0.6=0.4+0.6/k$
- $k = 3$
- $v_{new}=300\rm km / \rm h$
 
#### Practive Problem 1.2

한 자동자 제조회사가 고객에게 다음 출시할 신형 엔진이 4배의 성능 향상을 보여줄 것이라고 약속했다.
엔진의 90% 부분만 개선 가능하다고 결정을 내린 상태이다.
전체 엔진의 성능 목표를 달성하려면, 해당 부분을 얼마만큼(어느 k 수만큼) 향상시켜야 하는가?

- $1/4 = (1-\alpha) + {\alpha}/k = 0.1+0.9/k$
- $k = 6$

#### Special case - k to infinity

1. k를 무시할 수 있는 수준의 시간으로 바꾼다면?

$$ S_{\infin} = {{1} \over {(1-\alpha)}}$$

2. 전체 시스템의 60%에 걸리는 시간을 무시할 수 있을 정도로 만들어도, 전체 성능 향상은 2.5배

#### Conclusion
- 전체 시스템의 속도를 향상시키려면, 시스템에서 가장 큰 비중을 차지하는 부분의 속도를 개선해야 함
- 어떤 프로세스든 개선할 때 적용할 수 있는 일반적 원칙 설명

## 1.9.2 Concurrency and Parallelism

#### Overview
1. **동시성(concurrency)**: 시스템 내에서 여러 작업이 동시에 실행되는 일반적인 개념을 가리킬 때 사용하는 용어
2. **병렬성(parallelism)**: 동시성을 활용하여 시스템의 실행 속도를 높이는 것을 의미

컴퓨터 시스템에서는 다양한 추상화 수준에서 병렬성을 활용할 수 있음

#### Thread-Level Concurrency